---
title: "计算机网络笔记 - 3"
subtitle: ""
layout: post
author: "Geooo"
header-img: ""
header-style: text
tags:
  - 计算机网络
---

# TCP的可靠传输原理

## 1. TCP可靠传输概览

首先解释一下什么是'可靠传输'：**可靠传输就是保证传送方发送的字节流与接收方收到的字节流完全一致**。

网络层是没有可靠传输机制的，尽自己最大的努力去进行交付。而传输层使用 TCP 实现可靠传输，TCP保证可靠传输机制有如下几种：

- 1) 校验和 Checksum
- 2) 序列号和确认应答机制 (重要)
- 3) 重传机制 (重要)
- 4) 流量控制 (滑动窗口协议) (重要)
- 5) 拥塞控制 (重要)

（除了校验和可以稍作了解外，其他都为重要知识点）

### 校验和

所谓TCP的校验和(Checksum)就是说：由发送端计算待发送TCP报文的校验和，然后接收端对接收到的TCP报文验证其校验和 (TCP校验和是一个端到端的校验和)。 **其目的是为了发现TCP报文的首部和数据从发送端发送到接收端的过程中是否发生变化，若有变化接收端则抛弃该TCP报文**。

> 关于校验和是如何计算和验证的，并非高频重点知识

TCP在计算校验和时，需要加上一个12字节的 **伪首部**。

> 其实 UDP也有校验和机制，只是UDP是可选，而TCP是必选的。TCP和UDP进行校验和的时候都需要加上12个字节的伪首部

**伪首部**的结构：伪首部占12字节，其数据是从IP数据报头获取，包含以下信息：源 IP 地址、目的 IP 地址、保留字节 (置 0)、传输层协议号 (TCP 是 6)、TCP 报文长度 (首部 + 数据)：

![](https://gitee.com/veal98/images/raw/master/img/20210109103333.png)

**伪首部是为了增加 TCP 校验和的检错能力：如根据目的 IP 地址检查这个 TCP 报文是不是传给我的、根据传输层协议号检查传输层协议是否选对了...... 伪首部只在校验的时候使用**。













